[package]
name = "sargon"
version = "0.6.16"
edition = "2021"
build = "build.rs"


[profile.release]
incremental = false
panic = 'unwind'
codegen-units = 1

[[test]]
name = "vectors"

[lib]
crate-type = ["staticlib", "cdylib", "lib"]

[[bin]]
name = "sargon-bindgen"
path = "src/bindgen/bin.rs"
required-features = ["build-binary"]

[dependencies]
log = "0.4.20"
pretty_env_logger = "0.5.0"
derive_more = { version = "1.0.0-beta.6", features = [
    "debug",
    "display",
    "from_str",
] }
serde = { version = "1.0.193", features = ["derive", "rc", "std"] }
serde_json = { version = "1.0.108", features = ["preserve_order"] }
serde_with = { version = "3.4.0" }
thiserror = "1.0.50"
iso8601-timestamp = { version = "0.2.16", features = ["serde", "std"] }
uuid = { version = "1.6.1", features = ["v4", "serde"] }
serde_repr = "0.1.17"
strum = { version = "0.26.0", features = ["derive"] }

# 587d5988cd4ca3c5193ddf37027ff4e4ecd637dc is the Scrypto commit that RET 1cfe879c7370cfa497857ada7a8973f8a3388abc uses
radix-engine-common = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc", features = [
    "serde",
] }
radix-engine = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc" }
sbor = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc" }
radix-engine-derive = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc" }
radix-engine-interface = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc", features = [
    "std",
] }
transaction = { git = "https://github.com/radixdlt/radixdlt-scrypto", rev = "587d5988cd4ca3c5193ddf37027ff4e4ecd637dc", features = [
    "std",
] }
radix-engine-toolkit-json = { git = "https://github.com/radixdlt/radix-engine-toolkit", rev = "1cfe879c7370cfa497857ada7a8973f8a3388abc" }
radix-engine-toolkit = { git = "https://github.com/radixdlt/radix-engine-toolkit", rev = "1cfe879c7370cfa497857ada7a8973f8a3388abc" }
enum-iterator = "1.4.1"
ed25519-dalek = "1.0.1"
rand = "0.8.5"
hex = "0.4.3"
delegate = "0.12.0"
itertools = { version = "0.12.0" }
enum-as-inner = "0.6.0"
identified_vec = { version = "0.1.11", features = ["serde", "id_prim"] }
nutype = { version = "0.4.0", features = ["serde"] }
schemars = { version = "0.8.12", features = ["preserve_order"] }
uniffi = { version = "0.27.0", features = ["cli"] }
pretty_assertions = "1.4.0"

# SLIP10 implementation
# iota_crypto = "0.23.1"
iota-crypto = { git = "https://github.com/iotaledger/crypto.rs", rev = "47460d64fd0514af136ea1c2c6f3aa29ed89d1b8", features = [
    "slip10",
    "ed25519",
    "secp256k1",
] }
# Transitive dependency of iota_crypto - used to construct PubKey from uncompressed bytes.
# k256 = "0.13.3"
k256 = { git = "https://github.com/RustCrypto/elliptic-curves", rev = "e158ce5cf0e9acee2fd76aff2a628334f5c771e5" }

# bip39 = "2.0.0"
bip39 = { git = "https://github.com/rust-bitcoin/rust-bip39", rev = "a30760beac21d595b2bda376df4f4e6bf029bcc5", features = [
    "serde",
] }

# assert-json-diff = "2.0.2"
assert-json-diff = { git = "https://github.com/davidpdrsn/assert-json-diff/", rev = "bca0d2c590808274298d939e0533da79cd09076d" }

# url = "2.5.0"
# url = { git = "https://github.com/servo/rust-url", rev = "00e9e18ce6504e0e9157816c593afec8e69cb9e3", features = ["serde"] } # BROKEN compat with reqwest: the trait bound `url::Url: IntoUrl` is not satisfied --> tests/integration/network_antenna_reqwest.rs:31:50
url = { version = "2.5.0", features = ["serde"] }

# paste = "1.0.14"
paste = { git = "https://github.com/dtolnay/paste", rev = "1e0cc1025af5388397c67fa4389ad7ad24814df8" }

# regex = "1.9.3"
regex = { git = "https://github.com/rust-lang/regex/", rev = "72f889ef3cca59ebac6a026f3646e8d92f056d88", optional = true }

# clap = "4.5.1"
clap = { git = "https://github.com/clap-rs/clap/", rev = "8a7a13a5618cfdc4ff328624a5266e7b4d88649a", default-features = false, features = [
    "std",
    "derive",
], optional = true }

# camino = "1.0.8"
camino = { git = "https://github.com/camino-rs/camino/", rev = "afa51b1b4c684b7e6698a6717ccda3affd0abd42", optional = true }


# async-trait = "0.1.79"
async-trait = { git = "https://github.com/dtolnay/async-trait", rev = "1eb21ed8bd87029bf4dcbea41ff309f2b2220c43" }

[build-dependencies]
uniffi = { version = "0.27.0", features = ["build"] }

# cargo_toml = "0.15.3"
cargo_toml = { git = "https://gitlab.com/lib.rs/cargo_toml", rev = "e498c94fc42a660c1ca1a28999ce1d757cfe77fe" }

[dev-dependencies]
uniffi = { version = "0.27.0", features = ["bindgen-tests"] }

# reqwest = "0.12.3"
reqwest = { git = "https://github.com/seanmonstar/reqwest", rev = "0720159f6369f54e045a1fd315e0f24b7a0b4a39", default-features = false, features = [
    "native-tls-vendored",
] }

# actix-rt = "3.3.0"
actix-rt = { git = "https://github.com/actix/actix-net", rev = "57fd6ea8098d1f2d281c305fc331216c4fe1992e" }

[features]
build-binary = ["camino", "clap", "regex"]
